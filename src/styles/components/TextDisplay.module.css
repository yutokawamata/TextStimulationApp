/* 文節表示コンポーネントのスタイル */

/* コンテナ: フレックスボックスレイアウトを使用 */
.container {
  display: flex; /* フレックスボックスレイアウトを使用 */
  justify-content: center; /* 水平方向の中央揃え（デフォルト） */
  align-items: center; /* 垂直方向の中央揃え（デフォルト） */
  height: 100vh; /* 画面の高さ100%を占める */
  background-color: var(--color-background); /* 背景色を薄いグレーに設定 */
}

/* 通常モード用のコンテナ: 上寄せ・右寄せ */
.containerNormal {
  display: flex;
  align-items: flex-start; /* 垂直方向を上寄せに変更 */
  justify-content: flex-end; /* 水平方向を右寄せに変更（縦書きでは右から左に表示） */
  padding-top: 30px; /* ナビバーの下に30pxの余白 */
  padding-right: 50px; /* 右側に50pxの余白 */
  margin-top: 0; /* 上部マージンを0に */
  height: 100vh;
  background-color: var(--color-background);
  align-content: flex-start; /* 複数行の場合も上寄せ */
}

/* 全文節モード用のコンテナ: 相対位置、上寄せ・右寄せ */
.containerFullText {
  position: relative; /* 相対位置 */
  display: flex;
  align-items: flex-start; /* 交差軸（水平方向）の開始 = 右側 */
  justify-content: flex-start; /* 主軸（垂直方向）の開始 = 上側 */
  padding-top: 30px; /* ナビバーの下に30pxの余白 */
  padding-right: 50px; /* 右側に50pxの余白 */
  padding-bottom: 120px; /* ボタンが表示されるスペースを確保（小さく） */
  padding-left: 20px; /* 左側の余白を追加（ボタンとの余白） */
  margin-top: 0; /* 上部マージンを0に */
  min-height: 100vh; /* 最小高さを100vhに */
  background-color: var(--color-background);
  align-content: flex-start; /* 複数行の場合も上寄せ */
  overflow-y: auto; /* 縦スクロールを有効にする */
}

/* テキスト表示エリア: 縦書き表示 */
.textDisplay {
  display: flex;
  flex-direction: row-reverse; /* 列を逆順に（縦書きは右から左に読むため） */
  gap: 10px; /* 列間のスペース */
  align-items: flex-start; /* 列を上寄せに */
  margin-top: 0;
  padding-top: 0;
  margin-left: auto; /* 右寄せのため */
  align-self: flex-start; /* 上部に揃える */
  cursor: pointer; /* マウスカーソルをポインターに変更（クリック可能を示す） */
  user-select: none; /* テキストの選択を無効にする（クリック時のテキスト選択を防ぐ） */
  overflow: visible; /* オーバーフローを表示 */
  height: auto; /* 高さを自動に設定（コンテンツに合わせる） */
}

/* 全文節モード用のテキスト表示: 右寄せのためmargin-left: auto */
.textDisplayFullText {
  display: flex;
  flex-direction: row-reverse; /* 列を逆順に（縦書きは右から左に読むため） */
  gap: 10px; /* 列間のスペース */
  align-items: flex-start; /* 列を上寄せに */
  margin-top: 0;
  padding-top: 0;
  margin-left: auto; /* 右寄せのため */
  align-self: flex-start; /* 交差軸（水平方向）の開始 = 右側 */
  cursor: pointer;
  user-select: none;
  overflow: visible; /* オーバーフローを表示 */
}

/* 全文節モード用の各列コンテナ */
.textColumn {
  display: flex;
  flex-direction: row; /* 縦書きではrowが縦方向（上から下）になる */
  align-items: flex-end; /* 横方向（縦書きでは左端）に揃える - ルビの有無に関係なく本文を左端に揃える */
  writing-mode: vertical-rl; /* 縦書き表示 */
  text-orientation: upright; /* 文字を正立させる */
  color: var(--color-text);
  font-size: 0; /* 列の高さを揃えるため（子要素で再設定） */
  line-height: 0; /* 列の高さを揃えるため（子要素で再設定） */
}

/* 文節: インラインブロック要素として表示 */
.textSegment {
  display: inline-block; /* inline-blockに変更して幅を内容に合わせる */
  margin-top: 4px; /* 縦書きでは上下の余白（文節間の空白）- 狭めに調整 */
  margin-bottom: 4px; /* 縦書きでは上下の余白（文節間の空白）- 狭めに調整 */
  margin-left: 0; /* 縦書きでは左右の余白は不要 */
  margin-right: 0; /* 縦書きでは左右の余白は不要 */
  opacity: 0; /* 初期状態では透明（非表示） */
  transition: opacity 0.3s ease-in-out; /* 透明度の変化にアニメーション効果を追加（0.3秒でスムーズに変化） */
  font-size: 30px; /* フォントサイズを大きく（24px → 30px） */
  line-height: 2.5; /* 全文節モード用: 行間を再設定 */
  vertical-align: top; /* 上端揃え（縦書きでは右端揃え） */
}

/* 文節: 表示状態 */
.textSegmentVisible {
  opacity: 1; /* 完全に不透明（表示状態） */
}

/* 列の最初の文節: 上部余白を0にして列を上揃え */
.textSegmentFirstInColumn {
  margin-top: 0 !important; /* 列の最初の要素は上部余白なし */
}

/* 文節: 非表示状態 */
.textSegmentHidden {
  opacity: 0; /* 完全に透明（非表示状態） */
}

/* ふりがな（ルビ）のスタイル */
.textSegment ruby {
  ruby-align: start; /* ルビを左寄せ（縦書きでは右端寄せ）に変更 */
  ruby-position: over; /* ルビを明示的に上（縦書きでは右側）に配置 */
}

.textSegment rt {
  font-size: 0.5em; /* ふりがなのフォントサイズを本文の50%に設定 */
  line-height: 1.2; /* ふりがなの行間を調整 */
  color: var(--color-text-light); /* ふりがなの色をグレーに設定（本文より薄く） */
  font-weight: normal; /* ふりがなのフォントウェイトを通常に設定 */
}

/* 全文節モード用の「つぎへ」ボタン */
.nextButton {
  position: fixed; /* スクロールしても固定 */
  bottom: 20px; /* 余白を小さく */
  left: 20px; /* 左寄せに戻す */
  z-index: var(--z-index-nav);
  width: 320px;
  max-width: calc(100vw - 40px); /* 画面幅に応じて調整 */
  box-shadow: 0 8px 0 rgba(0, 0, 0, 0.15);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.nextButton:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 0 rgba(0, 0, 0, 0.15);
}

.nextButton:active {
  transform: translateY(2px);
  box-shadow: 0 6px 0 rgba(0, 0, 0, 0.15);
}

/* タブレット・スマートフォン用のボタン調整 */
@media screen and (max-width: 1024px) {
  .nextButton {
    bottom: 15px;
    width: 280px;
  }
}

@media screen and (max-width: 768px) {
  .nextButton {
    bottom: 10px;
    width: 240px;
  }
}

/* 改行のスタイル（縦書き用） */
.lineBreak {
  display: block;
  width: 0;
  height: 0;
  margin: 0;
  padding: 0;
  /* 縦書きでは次の列（右側）に表示されるようにする */
  /* inline-block要素の間でblock要素を挿入すると、改行が発生し次の列に移動する */
  /* 縦書きでは、block要素が次の列に移動する */
}

/* レスポンシブ対応: 画面の高さに応じたフォントサイズ調整 */
/* 高さ 900px未満: フォントサイズを少し小さく */
@media screen and (max-height: 900px) {
  .textSegment {
    font-size: 26px;
    line-height: 2.3;
    margin-top: 3px;
    margin-bottom: 3px;
  }
}

/* 高さ 700px未満: フォントサイズをさらに小さく */
@media screen and (max-height: 700px) {
  .textSegment {
    font-size: 22px;
    line-height: 2.2;
    margin-top: 3px;
    margin-bottom: 3px;
  }
}

/* 高さ 600px未満: フォントサイズを最小に */
@media screen and (max-height: 600px) {
  .textSegment {
    font-size: 18px;
    line-height: 2.0;
    margin-top: 2px;
    margin-bottom: 2px;
  }
}

/* レスポンシブ対応: タブレット（画面幅） */
@media screen and (max-width: 1024px) {
  .textSegment {
    font-size: 26px; /* タブレット用のフォントサイズ */
    margin-top: 3px;
    margin-bottom: 3px;
  }
}

/* レスポンシブ対応: スマートフォン（画面幅） */
@media screen and (max-width: 768px) {
  .textSegment {
    font-size: 22px; /* スマートフォン用のフォントサイズ */
    margin-top: 3px;
    margin-bottom: 3px;
  }
}

/* 高さと幅の両方が小さい場合（スマホ横向きなど） */
@media screen and (max-width: 768px) and (max-height: 600px) {
  .textSegment {
    font-size: 18px;
    line-height: 2.0;
    margin-top: 2px;
    margin-bottom: 2px;
  }
}

